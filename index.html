<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <title></title>
</head>
<body>
<div id="wrapper">
  <header>
    <h1 id="title">Vendor Discovery</h1>
    <div id="subtitle">共同畫出一張可以登記、檢視<br/>並持續回報的街賣者地圖</div>
    <div id="add-button"><a href="javascript:void(0);" onclick="click_add_button();"><img src="img/add.png"></a></div>
    <script type="text/javascript">
      function click_add_button(){
        document.getElementById('add-form').style.display = 'block';
      }
    </script>
  </header>
  

  <div id="map">
    <div><!--<img src="imgs/map.jpg">--><iframe style="width: 95%;" id='ifmap' class="progress" src="https://www.google.com/fusiontables/embedviz?q=select+col2+from+1BILYy9TOfCajakAc0_mVuM4KiN8EdroQxzahA-g&viz=MAP&h=false&lat=23.66519554836995&lng=121.2888611368409&t=1&z=7&l=col2&y=2&tmplt=2&hml=ONE_COL_LAT_LNG" frameborder="0"></iframe></div>
    <script type="text/javascript">
      (function() {
        document.getElementById('ifmap').style.height = (window.innerHeight-150)+'px'
      })();
    </script>
  </div>

  <div id="add-form">
    <script>
    function geoFindMe() {
      var output = document.getElementById("out");

      if (!navigator.geolocation){
        output.innerHTML = "<p>Geolocation is not supported by your browser</p>";
        return;
      }

      function success(position) {
        var latitude  = position.coords.latitude;
        var longitude = position.coords.longitude;

        output.innerHTML = '<p hidden>Latitude is ' + latitude + '° <br>Longitude is ' + longitude + '°</p>';
        document.getElementById("entry.1164414394").value = latitude;
      document.getElementById("entry.178106887").value = longitude;

        var ifr = document.createElement("IFRAME");
        ifr.src = "https://www.google.com/maps/embed/v1/place?key=AIzaSyAk9B6vsDK5xEElIGPso_Gx_CK7GizSVxA&q="+latitude+","+longitude;

        output.appendChild(ifr);
      }

      function error() {
        output.innerHTML = "Unable to retrieve your location";
      }

      output.innerHTML = "<p>Locating…</p>";

      navigator.geolocation.getCurrentPosition(success, error);
    }

    </script>
      <form method="GET" action="https://docs.google.com/forms/d/e/1FAIpQLSeuzDtziAZ_nT9gr85Cr61dxXumNMvV3TCYwKAyDl-ce2C3tA/formResponse">
        遇見街賣者的地點： <br>
        <input type="text" id="entry.116613054" name="entry.116613054"><button>手動選擇地點</button><br>
        <div id="out"></div>
        遇見街賣者的日期時間:<br>
        <input type="text" id="entry.1077559226" name="entry.1077559226"><br>
        街賣者的特徵（髮型／衣著／性別）：<br>
        <input type="text" id="entry.65821089" name="entry.65821089"><br>
        街賣商品／性質：<br>
        <input type="text" id="entry.1813661924" name="entry.1813661924"><br>
        如何稱呼街賣者：<br>
        <input type="text" id="entry.1712004470" name="entry.1712004470"><br>
        聯絡方式：<br>
        <input type="text" id="entry.215220549" name="entry.215220549"><br>
        <input type="text" id="entry.1164414394" name="entry.1164414394" ps="latitude" hidden><br>
        <input type="text" id="entry.178106887" name="entry.178106887" ps="longitude" hidden>
        <input type="submit" value="Done">
      </form>
    <script type="text/javascript">
      (function(){
        geoFindMe()
      })();
    </script>
  </div>
</div>
</body>
</html>